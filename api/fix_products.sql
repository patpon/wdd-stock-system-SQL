-- =====================================================
-- Fix Script: แก้ไขปัญหารายการสินค้าไม่แสดง
-- ปัญหา: หลังจาก copy ตารางจาก Project เดิม สินค้าไม่แสดง
-- สาเหตุ: คอลัมน์ is_active อาจไม่มี หรือมีค่าเป็น 0 หรือ NULL
-- =====================================================

-- วิธีใช้:
-- 1. เปิด phpMyAdmin
-- 2. เลือก Database ที่ใช้งาน
-- 3. ไปที่ Tab "SQL"
-- 4. Copy โค้ดนี้ทั้งหมดแล้วกด "Go"

-- =====================================================
-- STEP 1: ตรวจสอบว่ามีคอลัมน์ is_active หรือไม่
-- ถ้าไม่มี ให้เพิ่มคอลัมน์
-- =====================================================
ALTER TABLE master_products 
ADD COLUMN IF NOT EXISTS is_active TINYINT(1) DEFAULT 1 COMMENT 'สถานะใช้งาน: 1=เปิด, 0=ปิด';

-- =====================================================
-- STEP 2: อัพเดทให้สินค้าทั้งหมดเป็น active (is_active = 1)
-- =====================================================
UPDATE master_products SET is_active = 1 WHERE is_active IS NULL OR is_active = 0;

-- =====================================================
-- STEP 3: ตรวจสอบผลลัพธ์
-- =====================================================
SELECT code_product, name, is_active FROM master_products LIMIT 20;

-- หลังจากรันคำสั่งนี้  ให้ refresh หน้าเว็บแล้วลองโหลดข้อมูลใหม่
